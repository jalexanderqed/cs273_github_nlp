Hi guys,

I am new to rocksdb. In order to avoid data loss after machine crashes, I enabled both sync and WAL for write operation, but the performance downgraded significantly.

After adding some logs before and after this line (https://github.com/facebook/rocksdb/blob/4.1.fb/db/db_impl.cc#L3897), it shows this Sync operation takes 20-50 ms. 

Will try to dig into Sync operation, but it will be appreciated to get some help from here.

P.S. Each rocksdb instance uses one HDD disk, including operation logs, data logs, sst files, etc, are on this disk.

Thanks.

