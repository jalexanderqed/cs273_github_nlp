
Hi @siying and @kradhakrishnan 
This is a continuation work of issue https://github.com/facebook/rocksdb/issues/1009 
Thanks for reviewing this. 
The Travis build failure is irrelevant. 

Thanks for importing. If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D4045443).

